-#- if params[:org_name].present? || params[:kind].present? || params[:category].present? || params[:language].present?

%section#search-options

  = render :partial => "component/search/filter", :locals => {:field=>"location", :legend=>"Near Address",:field_value=>params[:location], :aggregate_field=>@aggregate_locations, :add_input_type=>"TEXT"}
  - cache ['cities-list', *smc_cities] do
    %datalist#location-list
      - smc_cities.each do |city|
        %option{:value=>city}
          = city

  = render :partial => "component/search/filter", :locals => {:field=>"service_area", :legend=>"Service Area",:field_value=>params[:service_area], :aggregate_field=>@aggregate_service_areas}

  = render :partial => "component/search/filter", :locals => {:field=>"kind", :legend=>"Kind of Organization",:field_value=>params[:kind], :aggregate_field=>@aggregate_kinds}

  -#

    = render :partial => "component/search/filter", :locals => {:field=>"kind", :legend=>"Kind of Organization",:field_value=>params[:kind], :aggregate_field=>@aggregate_kinds, :add_input_type=>"TEXT", :list_values=>(kind_terms.reject{|x| @aggregate_kinds.include? x})}

    - cache ['kind_terms', *kind_terms] do
      %datalist#kind-list
        - kind_terms.each do |kind|
          %option{:value=>kind}
            = kind

  = render :partial => "component/search/filter", :locals => {:field=>"org_name", :legend=>"Agency Name",:field_value=>params[:org_name], :aggregate_field=>@aggregate_org_names, :add_input_type=>"TEXT"}


  -#
    %fieldset#kind-options
      %legend.open
        Kind of organization
      - kind = params[:kind] || ""
      - is_checked = kind.blank? ? true : false

      %div
        %div.radio-group
          %div.toggle
            = radio_button_tag :kind_option, "", is_checked, {:id=>"kind_option_0"}
            %label{:for => "kind_option_0"}
          %label{:for => "kind_option_0",:id => "kind_option_0_label"}
            All

        - cache ['aggregate_kinds', *@aggregate_kinds] do
          - length = @aggregate_kinds.length-1
          - for i in 0..length
            %div.radio-group
              %div.toggle
                - is_checked = @aggregate_kinds[i] == kind ? true : false
                = radio_button_tag :kind_option, @aggregate_kinds[i], is_checked, {:id=>"kind_option_#{i+1}"}
                %label{:for => "kind_option_#{i+1}"}
              %label{:for => "kind_option_#{i+1}",:id => "kind_option_#{i+1}_label"}
                = @aggregate_kinds[i]
          %div.radio-group
            %div.toggle.add
              %input{:type=>"radio",:name=>"kind_option",:id=>"kind_option_#{length+2}"}
              %label{:for => "kind_option_#{length+2}"}
            %label{:for => "kind_option_#{length+2}",:id => "kind_option_#{length+2}_label"}
              %span
                Add...
              = search_field_tag "kind_option_input", "", :class=>"hide"
      = hidden_field_tag 'kind',kind


-#- if params[:category].present?
  %fieldset#category-options
    %legend Category of service...
    - category = params[:category]
    - new_params = @search_params.dup
    - new_params.delete(:category)
    %a{ :href => organizations_path(new_params) }
      = category
    = hidden_field_tag 'category',category
    %div.search-check
      %input{:type=>"checkbox",:id=>"category-checkbox"}
      %label{:for=>"category-checkbox"}

  -#- if params[:kind].present?
  %fieldset#kind-options
    %legend Kind of service...
    - kind = params[:kind]
    - kind = kind[0] if kind.present?
    - new_params = @search_params.dup
    - new_params.delete(:kind)
    %a{ :href => organizations_path(new_params) }
      = kind
    = hidden_field_tag 'kind[]',kind
    %div.search-check
      %input{:type=>"checkbox",:id=>"kind-checkbox"}
      %label{:for=>"kind-checkbox"}

  -#- if params[:language].present?
  %fieldset#language-options
    %legend Language availability...
    - language = params[:language]
    - new_params = @search_params.dup
    - new_params.delete(:language)
    %a{ :href => organizations_path(new_params) }
      = language
    = hidden_field_tag 'language',language
    %div.search-check
      %input{:type=>"checkbox",:id=>"language-checkbox"}
      %label{:for=>"language-checkbox"}

%button{:type=>'submit', :id=>'update-btn', :title=>"Update"}
  %span{"data-icon"=>"🔍" , :class=>"search-button ohana-icon"}
  %span Update
%div#reset-btn
  %a{:href=>organizations_path}
    Reset

-#
  %fieldset
    %label{:for=>"language"}
      Filter services by language availability:
    = select_tag :language, options_for_select([['English', ''],
    ['Español (Spanish)', 'spanish'],
    ['Tagalog (Filipino)', 'tagalog'],
    ['中文 (Chinese)', 'chinese'],
    ['العربية (Arabic)', 'arabic'],
    ['Русский (Russian)', 'russian'],], :selected => params[:language])

  %fieldset
    %legend Location
    %label{:for=>"radius"}
      Search radius:
    = select_tag :radius, options_for_select([['2 miles', 2],['5 miles', 5],['10 miles', 10]], :selected => params[:radius])

    %legend Age
    %input

    %legend Gender
    %input

    %legend Income
    %input
